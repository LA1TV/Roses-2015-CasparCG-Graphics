<div class="ui form segment">
  <h2>Social Media</h2>

    <div class="ui grid center aligned">
        <div class="4 wide column">
            <div class="field"><checkbox ng-model="socialmedia.show" size="large" type="toggle">Show Post</checkbox></div>
        </div>
    </div>

    <div class="ui divider"></div>

    <br>
   <div class="ui grid">

        <div class="sixteen wide column">
		
			<div class="fields">

                <div class="eight wide field">
					<input id=socialUrl type="text" placeholder="Post URL (Twit, Insta, FB Etc)" ng-model="socialmedia.tweet">
				</div>
		

				<div class="four field">
						 <dropdown title="Tweet Location"  ng-model="socialmedia.pos">
							<dropdown-group>bottom left</dropdown-group>
							<dropdown-group>bottom right</dropdown-group>
							<dropdown-group>bottom center</dropdown-group>
							<dropdown-group>top center</dropdown-group>
						  </dropdown>
				</div>
				<div class="two field">
						 <dropdown title="Caption"  ng-model="socialmedia.caption" id=socialCaption>
							<dropdown-group>show</dropdown-group>
							<dropdown-group>hide</dropdown-group>
						  </dropdown>
				</div>
			
				<div class="two wide field">
						<button id=resolve-tweet class="ui blue button">Preview </button>
				</div>
			</div>
		</div>
</div>	
<br>
 <div class="ui divider"></div>

    <br>
    <div class="ui grid">
    <div class="four wide column center"> </div>  
	<div class="eight wide column center">
        <div id=tweet_details></div>
	</div>
	<div class="four wide column center"> </div>  	
	</div>
			
		<script>
		
			$(document).ready(function() {
			  $("#resolve-tweet").click(function() {
				var url = $("#socialUrl").val();
				var caption = $("#socialCaption").val();		
				
				if (url.includes("instagram.com")) { oEmbedUrl = 'http://api.instagram.com/oembed?url=';
					
					if (caption == 'show') { 
          				showCaption = ''; 
          			} else { 
          				showCaption = '&hidecaption=true'; 
          			} 
				 }
				else if (url.includes("facebook.com")) 
					 if 	(url.includes("video")) {
          					oEmbedUrl = 'https://www.facebook.com/plugins/video/oembed.json/?url='; 
          				}
          			 else { 
          					oEmbedUrl = 'https://www.facebook.com/plugins/post/oembed.json/?url=';
          			 }	
          		else { oEmbedUrl = 'https://api.twitter.com/1/statuses/oembed.json?url=';
          			
          			if (caption == 'show') { 
          				showCaption = ''; 
          			} else { 
          				showCaption = '&hide_media=true'; 
          			} 
          		
          		}	
				if (url == "") {
				  $(".controls").addClass("error");
				} else {
				  $("#tweet_div").show();
				  $.ajax({
					url: oEmbedUrl + url + showCaption,
					dataType: "jsonp",
					success: function(data) {
					  $('#tweet_details').html(data.html);
					}
				  });
				}
			  })
			})
	  </script>


   